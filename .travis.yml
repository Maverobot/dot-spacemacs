language: ruby
os: linux
dist: bionic

cache:
  directories:
    - /home/travis/.emacs.d/

jobs:
  include:
    - os: linux
      dist: bionic
    - os: linux
      dist: focal

before_install: skip

install:
  - mkdir /home/travis/org/home/roam -p # placeholder folder for org-roam
  - curl -o- https://raw.githubusercontent.com/Maverobot/dot-spacemacs/${TRAVIS_BRANCH}/installer.sh | tee /dev/tty | bash

script: skip

after_success:
  - echo "skipped"

before_deploy:
  - cp /home/travis/.spacemacs.d/docs/index.html /home/travis/build/Maverobot/dot-spacemacs/docs

deploy:
  provider: pages
  strategy: git
  skip_cleanup: true
  token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
  keep_history: false
  on:
    branch: master
